# SRAM和DRAM

Dynamic Random Access Memory， 即动态 RAM

Static Random Access Memory，即静态 RAM

DRAM用于主存、SRAM用于Cache

高频考点：DRAM和SRAM的对比

核心区别：存储元不一样

栅极电容 v.s. 双稳态触发器

![](1.png)

## DRAM芯片 栅极电容

使用栅极电容存储信息

电容放电信息被破坏，是破坏性读出。读出后应有重写操作：也称“再生”

读写速度更慢

每个存储元制造成本更低，集成度高，功耗低

电容内的电荷只能维持2ms。即便不断电，2ms后信息也会消失。

2ms之内必须“刷新”一次（给电容充电）

1：电容内存储了电荷

0：电容内未存储电荷

读出1：MOS管接通，电容放电，数据线上产生电流

读出0：MOS管接通后，数据线上无电流

![](2.png)

## SRAM芯片 双稳态触发器

使用双稳态触发器存储信息

读出数据，触发器状态保持稳定，是非破坏性读出，无需重写

读写速度更快

每个存储元制造成本高，集成度低，功耗大

只要不断电，触发器的状态就不会改变

双稳态

1：A高B低

0：A低B高

<img src="3.png" style="zoom:67%;" />

## DRAM v.s. SRAM

- SRAM常用作Cache
- DRAM常用作主存
- 现在的主存通常采用SDRAM芯片

| 类型特点                 | SRAM（静态RAM）        | DRAM（动态RAM）                                              |
| ------------------------ | ---------------------- | ------------------------------------------------------------ |
| 存储信息                 | 触发器                 | 电容                                                         |
| 破坏性读出               | 非                     | 是                                                           |
| 读出后需要重写？（再生） | 不用                   | 需要                                                         |
| 运行速度                 | 快                     | 慢                                                           |
| 集成度                   | 低                     | 高                                                           |
| 发热量                   | 大                     | 小                                                           |
| 存储成本                 | 高                     | 低                                                           |
| 易失/非易失性存储器？    | 易失（断电后信息消失） | 易失（断电后信息消失）                                       |
| 需要“刷新”？             | 不需要                 | 需要（分散、集中、异步）<br />“刷新”由存储器独立完成，不需要CPU控制 |
| 送行列地址               | 同时送                 | 分两次送（地址线复用技术）<br />导致地址线、地址引脚减半     |

## DRAM的刷新

1. 多久刷新一次？

   刷新周期：一般为2ms

2. 每次刷新多少存储单元？

   以行为单位，每次刷新一行存储单元

   为什么要用行列地址？减少选通线的数量

   存储单元排列成
   $$
   2^{n/2}*2^{n/2}
   $$
   的矩阵

   ![](4.png)

   ![](5.png)

3. 如何刷新？

   有硬件支持，读出一行的信息后重新写入，占用1个读/写周期

4. 在什么时刻刷新？

   ![](7.png)

## DRAM的地址线复用技术

行、列地址分两次送，可使地址线更少，芯片引脚更少

![](8.png)

# 只读存储器

RAM芯片 易失性，断电后数据消失

ROM芯片 非易失性，断电后数据不会丢失

<img src="9.png" style="zoom:67%;" />

**MROM** Mask Read-Only Memory 掩膜式只读存储器

厂家按照客户需求，在芯片生产过程中直接写入信息，之后任何人不可重写（只能读出）

可靠性高、灵活性差、生产周期长、只适合批量定制

**PROM** Programmable Read-Only Memory 可编程只读存储器

用户可用专门的PROM写入器写入信息，写一次之后就不可更改

**EPROM** Erasable Programmable Read-Only Memory 可擦除可编程只读存储器

允许用户写入信息，之后用某种方法擦除数据，可进行多次重写

**UVEPROM** ultraviolet rays 用紫外线照射8~20分钟，擦除所有信息

EEPROM 也常记为E2PROM 第一个E是Electrically 可用电擦除的方式，擦除特定的字

**Flash Memory** 闪速存储器（注：U盘、SD卡就是闪存）

每个存储元只需单个MOS管，位密度比RAM高

在EEPROM基础上发展而来，断电后也能保存信息，且可进行多次快速擦除重写

注意：由于闪存需要先擦除再写入，因此闪存的“写“速度要比”读“速度更慢。

**SSD** Solid State Drives 固态硬盘

由控制单元+存储单元（Flash芯片）构成，与闪存存储器的核心区别在于控制单元不一样，但存储介质都类似，可进行多次快速擦除重写。SSD速度快、功耗低、价格高。目前个人电脑上常用SSD取代传统的机械硬盘

## 计算机内的重要ROM

CPU的任务：到主存中取指令并执行指令

主板上的BIOS芯片（ROM），存储了”自举装入程序”，负责引导装入操作系统（开机）

![](10.png)

注：我们常说“内存条”就是“主存”，但事实上，主板上的ROM芯片也是“主存”的一部分。

逻辑上，主存由RAM+ROM组成，且二者常统一编址

![](11.png)

# 双口RAM&多模块存储器

![](12.png)

## 存取周期

可以连续读/写的最短时间间隔

注：DRAM芯片的恢复时间比较长，有可能是存取时间的几倍（SRAM的恢复时间较短）

如：存取时间为r，存取周期为T，T=4r

多核CPU都要访存，怎么办？

CPU的读写速度比主存快很多，主存恢复时间太长怎么办？

## 双端口RAM

对比操作系统“读者-写者问题”

作用：优化多核CPU访问一根内存条的速度

需要有两组完全独立的数据线、地址线、控制线。CPU、RAM中也要有更复杂的控制电路。

两个端口对同一主存操作有以下4中情况：

1. 两个端口同时对不同的地址单元存取数据。
2. 两个端口同时对同一地址单元读出数据。
3. 两个端口同时对同一地址单元写入数据。
4. 两个端口同时对同一地址单元，一个写入数据，另一个读出数据。

解决方法：置“忙”信号为0，由判断逻辑决定暂时关闭一个端口（即被延时），未被关闭的端口正常访问，被关闭的端口延长一个很短的时间段后再访问。

![](13.png)

## 多体并行存储器

### 高位交叉编址的多体存储器

![](14.png)



### 低位交叉编址的多体存储器

![](15.png)

每个存储体存取周期为T

存取时间为r，假设T=4r

![](16.png)

### 应该取几个“体”？

采用“流水线”的方式并行存取（宏观上并行，微观上串行）

宏观上，一个存储周期内，m体交叉存储器可以提供的数据量为单个模块的m倍

存取周期为T，存取时间为r，为了使流水线不间断，应保证模块数
$$
m\geq T/r
$$
![](17.png)

存取周期为T，总线传输周期为r，为了使流水线不间断，应保证模块数
$$
m\geq T/r
$$
思考：给定一个地址x，如何确定它属于第几个存储体

## 多模块存储器

### 多体并行存储器

![](19.png)

每个模块都有相同的容量和存取速度。各模块都有独立的读写控制电路、地址寄存器和数据寄存器。它们既能并行工作，又能交叉工作。

### 单体多字存储器

![](18.png)

每个存储单元存储m个字

总线宽度也为m个字

一次并行读出m个字

每次只能同时取m个字，不能单独取其中某个字

指令和数据在主存内必须是连续存放的

![](20.png)